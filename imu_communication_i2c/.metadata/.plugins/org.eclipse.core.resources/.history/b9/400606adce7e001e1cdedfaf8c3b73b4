/*
 * imu_uart.h
 *
 *  Created on: 2023/11/09
 *      Author: space
 */

#ifndef IMU_UART_H_
#define IMU_UART_H_

#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include "system.h"
#include <string.h>
#include "altera_avalon_pio_regs.h"
#include <altera_avalon_uart.h>
#include "altera_avalon_uart_regs.h"
//#include <altera_avalon_i2c.h>
//#include "altera_avalon_i2c_regs.h"
#include "sys/alt_irq.h"
#include <math.h>
#include <io.h>
#include <unistd.h>


#define interval 20000//micro s
#define TRUE 1
#define FALSE 0
//REGISTER DEFINITION START
#define SENSORS_GRAVITY_EARTH             (9.80665F)              /**< Earth's gravity in m/s^2 */
#define SENSORS_GRAVITY_MOON              (1.6F)                  /**< The moon's gravity in m/s^2 */
#define SENSORS_GRAVITY_SUN               (275.0F)                /**< The sun's gravity in m/s^2 */
#define SENSORS_GRAVITY_STANDARD          (SENSORS_GRAVITY_EARTH)
#define SENSORS_MAGFIELD_EARTH_MAX        (60.0F)                 /**< Maximum magnetic field on Earth's surface */
#define SENSORS_MAGFIELD_EARTH_MIN        (30.0F)                 /**< Minimum magnetic field on Earth's surface */
#define SENSORS_PRESSURE_SEALEVELHPA      (1013.25F)              /**< Average sea level pressure is 1013.25 hPa */
#define SENSORS_DPS_TO_RADS               (0.017453293F)          /**< Degrees/s to rad/s multiplier */
#define SENSORS_GAUSS_TO_MICROTESLA       (100)                   /**< Gauss to micro-Tesla multiplier */

#define BNO055_ADDR 0x28
#define STOP_BIT 0x100


//Operation mode setting
#define OPR_MODE_ADDR 0x3d
#define CONFIG_MODE 0x00
#define GYRONLY_MODE 0x03
#define ACC_GYRO_MODE 0x05
#define AMG_MODE 0x07
#define IMU_MODE 0x0c

//Power mode setting
#define PWR_MODE_ADDR 0x3e
#define NORMAL_MODE 0x00
#define LOW_MODE 0x01
#define SUSPEND_MODE 0x02

//Caliblation
#define CALIB_STAT_ADDR 0x35
#define RST_SYS_ADDR 0x3f


//Status registers
#define CHIP_ID 0x00
#define SYS_CLK_STAT 0x38
#define PAGE_ID 0x07
#define PAGE_0 0x00
#define PAGE_1 0x01

//加速度アドレス
#define ACC_X_LSB 0x08
#define ACC_X_MSB 0x09
#define ACC_Y_LSB 0x0a
#define ACC_Y_MSB 0x0b
#define ACC_Z_LSB 0x0c
#define ACC_Z_MSB 0x0d
//角速度アドレス
#define GYR_X_LSB 0x14
#define GYR_X_MSB 0x15
#define GYR_Y_LSB 0x16
#define GYR_Y_MSB 0x17
#define GYR_Z_LSB 0x18
#define GYR_Z_MSB 0x19
//クォータニオン(姿勢）
#define QUA_W_LSB 0x20
#define QUA_W_MSB 0x21
#define QUA_X_LSB 0x22
#define QUA_X_MSB 0x23
#define QUA_Y_LSB 0x24
#define QUA_Y_MSB 0x25
#define QUA_Z_LSB 0x26
#define QUA_Z_MSB 0x27
//I2C IP core
#define ENABLE 0x3//BUS_SPEED:高速(400kbps),ENABLE:有効
#define DISABLE 0x0

//UART
#define UART_START 0xaa
#define UART_READ 0x01
#define UART_WRITE 0x00
#define RES_SUCCESS 0xbb
#define RES_FAIL 0xee
#define WR_STATUS 0xee
#define SYS_TRG_ADDR 0x3f

typedef uint8_t u8;//符号なし8bit整数



#endif /* IMU_UART_H_ */
